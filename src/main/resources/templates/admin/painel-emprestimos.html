<section class="max-w-6xl mx-auto mt-10" th:fragment="section">
    <!-- Painel de Empréstimos Abertos -->
    <div class="bg-yellow-100 border-l-4 border-yellow-500 rounded-lg shadow mb-8">
        <div class="bg-yellow-300 rounded-t-lg px-6 py-4 flex items-center gap-2">
            <i class="bi bi-hourglass-split text-yellow-800 text-xl"></i>
            <h5 class="mb-0 font-semibold text-lg text-yellow-900">Empréstimos Abertos</h5>
        </div>
        <div class="p-6">
            <div th:if="${emprestimosAbertos != null && !emprestimosAbertos.isEmpty()}">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-yellow-200">
                            <tr>
                                <th class="px-4 py-2 text-left text-xs font-medium text-yellow-900 uppercase">Usuário</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-yellow-900 uppercase">Código</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-yellow-900 uppercase">Livros</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-yellow-900 uppercase">Data Empréstimo</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-yellow-900 uppercase">Data Devolução Prevista</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-100">
                            <tr th:each="emprestimo : ${emprestimosAbertos}" class="hover:bg-yellow-50">
                                <td class="px-4 py-2" th:text="${emprestimo.usuario.nome}">Usuário</td>
                                <td class="px-4 py-2" th:text="${emprestimo.codigo}">001</td>
                                <td class="px-4 py-2">
                                    <ul class="mb-0">
                                        <li th:each="livro : ${emprestimo.livros}">
                                            <span th:text="${livro.titulo}">Título do Livro</span>
                                            <span th:if="${livro.situacao.name() == 'DISPONIVEL'}"
                                                class="bg-green-100 text-green-700 rounded px-2 py-0.5 text-xs ml-2">Devolvido</span>
                                            <span th:if="${livro.situacao.name() != 'DISPONIVEL'}"
                                                class="bg-yellow-200 text-yellow-800 rounded px-2 py-0.5 text-xs ml-2">Pendente</span>
                                        </li>
                                    </ul>
                                </td>
                                <td class="px-4 py-2" th:text="${#temporals.format(emprestimo.data_emprestimo, 'dd/MM/yyyy')}">01/01/2023</td>
                                <td class="px-4 py-2" th:text="${#temporals.format(emprestimo.data_emprestimo.plusWeeks(2), 'dd/MM/yyyy')}">15/01/2023</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div th:if="${emprestimosAbertos == null || emprestimosAbertos.isEmpty()}" class="bg-blue-50 text-blue-800 rounded p-4 mt-4 text-center">
                <i class="bi bi-info-circle"></i> Nenhum empréstimo aberto encontrado.
            </div>
        </div>
    </div>

    <!-- Painel de Empréstimos Finalizados -->
    <div class="bg-green-100 border-l-4 border-green-500 rounded-lg shadow mb-8">
        <div class="bg-green-500 rounded-t-lg px-6 py-4 flex items-center gap-2">
            <i class="bi bi-check-circle text-white text-xl"></i>
            <h5 class="mb-0 font-semibold text-lg text-white">Empréstimos Finalizados</h5>
        </div>
        <div class="p-6">
            <div th:if="${emprestimosFinalizados != null && !emprestimosFinalizados.isEmpty()}">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-green-200">
                            <tr>
                                <th class="px-4 py-2 text-left text-xs font-medium text-green-900 uppercase">Usuário</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-green-900 uppercase">Código</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-green-900 uppercase">Livros</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-green-900 uppercase">Data Empréstimo</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-green-900 uppercase">Data Devolução Prevista</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-100">
                            <tr th:each="emprestimo : ${emprestimosFinalizados}" class="hover:bg-green-50">
                                <td class="px-4 py-2" th:text="${emprestimo.usuario.nome}">Usuário</td>
                                <td class="px-4 py-2" th:text="${emprestimo.codigo}">001</td>
                                <td class="px-4 py-2">
                                    <ul class="mb-0">
                                        <li th:each="livro : ${emprestimo.livros}">
                                            <span th:text="${livro.titulo}">Título do Livro</span>
                                            <span class="bg-green-100 text-green-700 rounded px-2 py-0.5 text-xs ml-2">Devolvido</span>
                                        </li>
                                    </ul>
                                </td>
                                <td class="px-4 py-2" th:text="${#temporals.format(emprestimo.data_emprestimo, 'dd/MM/yyyy')}">01/01/2023</td>
                                <td class="px-4 py-2" th:text="${#temporals.format(emprestimo.data_emprestimo.plusWeeks(2), 'dd/MM/yyyy')}">15/01/2023</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div th:if="${emprestimosFinalizados == null || emprestimosFinalizados.isEmpty()}"
                class="bg-blue-50 text-blue-800 rounded p-4 mt-4 text-center">
                <i class="bi bi-info-circle"></i> Nenhum empréstimo finalizado encontrado.
            </div>
        </div>
    </div>
</section>