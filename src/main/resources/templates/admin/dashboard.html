<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout (~{::title}, ~{::section})}">

<head>
    <title>Painel Administrativo - Sistema de Biblioteca</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>

<body class="bg-gray-100 min-h-screen">
    <section class="py-8 px-2 flex flex-col items-center min-h-screen">
        <div class="w-full max-w-6xl mx-auto">
            <div class="bg-blue-100 border border-blue-300 rounded-lg shadow p-6 mb-8 text-center">
                <h4 class="text-2xl font-bold text-blue-800 mb-2">Painel Administrativo</h4>
                <p class="text-gray-700">Bem-vindo, <span th:text="${session.nomeUsuario}">Administrador</span>. Aqui
                    você pode gerenciar todos os aspectos do sistema.</p>
            </div>
            <div class="flex justify-end mb-4">
                <a href="/logout"
                    class="bg-red-600 hover:bg-red-700 text-white font-semibold px-5 py-2 rounded transition flex items-center gap-2">
                    <i class="bi bi-box-arrow-right"></i> Sair do Sistema
                </a>
            </div>


            <div th:if="${message}"
                th:class="'rounded p-4 mb-6 ' + (${type} == 'success' ? 'bg-green-100 text-green-800' : (${type} == 'error' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'))">
                <span th:text="${message}"></span>
            </div>

            <div th:if="${mensagem}"
                th:class="'rounded p-4 mb-6 ' + (${alertClass} != null ? alertClass : 'bg-green-100 text-green-800')">
                <span th:text="${mensagem}"></span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Gestão de Livros -->
                <div>
                    <div class="rounded-lg shadow bg-white">
                        <div class="bg-green-600 text-white rounded-t-lg px-6 py-4">
                            <h5 class="mb-0 font-semibold text-lg">Gestão de Livros</h5>
                        </div>
                        <div class="rounded-b-lg p-6">
                            <p class="mb-4 text-gray-700">Administre o catálogo de livros da biblioteca</p>
                            <form th:action="@{/livros/novo}" th:object="${livro}" method="post" id="adicionarlivros">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="titulo" class="block font-semibold mb-1">Título:</label>
                                        <input type="text" id="titulo" th:field="*{titulo}"
                                            class="w-full rounded border-gray-300 focus:ring-2 focus:ring-green-400 px-3 py-2" />
                                        <div th:if="${#fields.hasErrors('titulo')}" class="text-red-600 text-xs mt-1"
                                            th:errors="*{titulo}"></div>
                                    </div>
                                    <div>
                                        <label for="autor" class="block font-semibold mb-1">Autor:</label>
                                        <input type="text" id="autor" th:field="*{autor}"
                                            class="w-full rounded border-gray-300 focus:ring-2 focus:ring-green-400 px-3 py-2" />
                                        <div th:if="${#fields.hasErrors('autor')}" class="text-red-600 text-xs mt-1"
                                            th:errors="*{autor}"></div>
                                    </div>
                                    <div>
                                        <label for="anoPublicacao" class="block font-semibold mb-1">Ano
                                            Publicação:</label>
                                        <input type="number" id="anoPublicacao" th:field="*{anoPublicacao}"
                                            class="w-full rounded border-gray-300 focus:ring-2 focus:ring-green-400 px-3 py-2" />
                                        <div th:if="${#fields.hasErrors('anoPublicacao')}"
                                            class="text-red-600 text-xs mt-1" th:errors="*{anoPublicacao}"></div>
                                    </div>
                                    <div>
                                        <label for="categoria" class="block font-semibold mb-1">Categoria:</label>
                                        <select id="categoria" th:field="*{categoria}"
                                            class="w-full rounded border-gray-300 focus:ring-2 focus:ring-green-400 px-3 py-2">
                                            <option value="">Selecione...</option>
                                            <option value="FICCAO">Ficção</option>
                                            <option value="NAO_FICCAO">Não Ficção</option>
                                            <option value="ROMANCE">Romance</option>
                                            <option value="BIOGRAFIA">Biografia</option>
                                            <option value="TECNOLOGIA">Tecnologia</option>
                                            <option value="CIENCIA">Ciência</option>
                                            <option value="HISTORIA">História</option>
                                            <option value="INFANTIL">Infantil</option>
                                            <option value="AUTOAJUDA">Autoajuda</option>
                                            <option value="POESIA">Poesia</option>
                                            <option value="EDUCACIONAL">Educacional</option>
                                            <option value="RELIGIAO">Religião</option>
                                            <option value="CULINARIA">Culinária</option>
                                            <option value="OUTROS">Outros</option>
                                        </select>
                                        <div th:if="${#fields.hasErrors('categoria')}" class="text-red-600 text-xs mt-1"
                                            th:errors="*{categoria}"></div>
                                    </div>
                                    <div>
                                        <label for="situacao" class="block font-semibold mb-1">Situação:</label>
                                        <select id="situacao" th:field="*{situacao}"
                                            class="w-full rounded border-gray-300 focus:ring-2 focus:ring-green-400 px-3 py-2">
                                            <option value="">Selecione...</option>
                                            <option value="DISPONIVEL">Disponível</option>
                                            <option value="EMPRESTADO">Emprestado</option>
                                        </select>
                                        <div th:if="${#fields.hasErrors('situacao')}" class="text-red-600 text-xs mt-1"
                                            th:errors="*{situacao}"></div>
                                    </div>
                                </div>
                                <div class="flex flex-wrap gap-2 mt-6">
                                    <button type="submit"
                                        class="bg-green-600 hover:bg-green-700 text-white font-semibold px-5 py-2 rounded transition">Salvar
                                        Livro</button>
                                    <button type="reset"
                                        class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition">Limpar</button>
                                    <a href="/livros"
                                        class="bg-white border border-green-600 text-green-600 hover:bg-green-50 font-semibold px-5 py-2 rounded transition flex items-center gap-2">
                                        <i class="bi bi-list"></i> Ver Todos os Livros
                                    </a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Gestão de Usuários -->
                <div>
                    <div class="rounded-lg shadow bg-white">
                        <div class="bg-blue-500 text-white rounded-t-lg px-6 py-4">
                            <h5 class="mb-0 font-semibold text-lg">Gestão de Usuários</h5>
                        </div>
                        <div class="rounded-b-lg p-6">
                            <p class="mb-4 text-gray-700">Gerencie os usuários do sistema</p>
                            <form th:action="@{/usuarios/novo}" th:object="${usuario}" method="post"
                                id="adicionarusuarios">
                                <div class="mb-2">
                                    <label for="nome" class="block font-semibold mb-1">Nome:</label>
                                    <input type="text" id="nome" th:field="*{nome}"
                                        class="w-full rounded border-gray-300 focus:ring-2 focus:ring-blue-400 px-3 py-2">
                                    <div th:if="${#fields.hasErrors('nome')}" class="text-red-600 text-xs mt-1"
                                        th:errors="*{nome}"></div>
                                </div>
                                <div class="mb-2">
                                    <label for="email" class="block font-semibold mb-1">Email:</label>
                                    <input type="email" id="email" th:field="*{email}"
                                        class="w-full rounded border-gray-300 focus:ring-2 focus:ring-blue-400 px-3 py-2">
                                    <div th:if="${#fields.hasErrors('email')}" class="text-red-600 text-xs mt-1"
                                        th:errors="*{email}"></div>
                                </div>
                                <div class="mb-2">
                                    <label for="senha" class="block font-semibold mb-1">Senha:</label>
                                    <input type="password" id="senha" th:field="*{senha}"
                                        class="w-full rounded border-gray-300 focus:ring-2 focus:ring-blue-400 px-3 py-2">
                                    <div th:if="${#fields.hasErrors('senha')}" class="text-red-600 text-xs mt-1"
                                        th:errors="*{senha}"></div>
                                </div>
                                <div class="mb-2">
                                    <label for="telefone" class="block font-semibold mb-1">Telefone:</label>
                                    <input type="text" id="telefone" th:field="*{telefone}"
                                        class="w-full rounded border-gray-300 focus:ring-2 focus:ring-blue-400 px-3 py-2">
                                    <div th:if="${#fields.hasErrors('telefone')}" class="text-red-600 text-xs mt-1"
                                        th:errors="*{telefone}"></div>
                                </div>
                                <div class="mb-2">
                                    <label for="dataNasc" class="block font-semibold mb-1">Data de Nascimento:</label>
                                    <input type="date" id="dataNasc" th:field="*{dataNasc}"
                                        class="w-full rounded border-gray-300 focus:ring-2 focus:ring-blue-400 px-3 py-2">
                                    <div th:if="${#fields.hasErrors('dataNasc')}" class="text-red-600 text-xs mt-1"
                                        th:errors="*{dataNasc}"></div>
                                </div>
                                <button type="submit"
                                    class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-2 rounded transition mt-2">
                                    Cadastrar Usuário
                                </button>
                            </form>
                            <a href="/usuarios"
                                class="bg-white border border-blue-600 text-blue-600 hover:bg-blue-50 font-semibold px-5 py-2 rounded transition flex items-center gap-2 mt-4 block">
                                <i class="bi bi-people"></i> Ver Todos os Usuários
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div th:replace="admin/painel-emprestimos :: section"></div>
        </div>
    </section>
</body>

</html>